version: 2
models:
- name: V_STG_DOCUMENTS_CONTROLLED
  description: This model compiles all documents controlled by our service. Each row is an event of one set of controls is applied to one document.
  meta:
    owner: Fraud Team / dan_leds@document_fraud.com
  tests: 
  - unique:  
      column_name: event_id 
  columns:
    - name: event_id
      description: the unique id of the event of the document controlled
      test:
        - not_null
    - name: control_applied_status
      description: the status of control applied
    - name: receipt_at
      description: timestamp of recept of the control
    - name: document_id 
      description: The unique id of the document controlled 
      tests:
        - not_null
    - name: control_score
      description: Score category of the document controlled
    - name: issue_at
      description: timestamp of issue of the document after control 
    - name: control_status
      description: The status of the control after application to the document
    - name: control_scores
      description: category of control for the document.
    - name: document_face_id
      description: the id of the document face (recto, verso)
    - name: document_type
      description: if is the document face or else
    - name: control_domain
      description: if it is kyc or else
    - name: channel_acquisition_id
      description: where comes from the applicant (client1, client2...)
    - name: control_subject
      description: the control is exercised over the applicant or the document
    - name: control_name
      description: the specific area where the control is exercised
      tests:
        - accepted_values: ['alternate_family_name_consistency', 
                            'alternate_family_name_detection', 
                            'family_name_account_holder_search', 
                            'family_name_consistency', 
                            'family_name_search', 
                            'address_locality_consistency', 
                            'address_consistency',
                            'birthdate_mrz_consistency',
                            'personal_id_consistency',
                            'bic_iban_consistency',
                            'date_validation']
 